FIND_PACKAGE(Protobuf REQUIRED)
FIND_PACKAGE(Snappy  REQUIRED)

include_directories(${PROTOBUF_INCLUDE_DIRS})

add_library(dm STATIC
            array.cpp
            boxed.cpp
            boxed_trace.cpp
            boxed_trace_buffered.cpp
            boxed_trace_sync.cpp
            dbg_indenter.cpp
            dbg_info.cpp
            map.cpp
            map_trace.cpp
            map_trace_buffered.cpp
            map_trace_sync.cpp
            map_iterator.cpp
            map_util.cpp
            object.cpp
            receiver.cpp
            record.cpp
            record_trace.cpp
            record_trace_buffered.cpp
            record_trace_sync.cpp
            set.cpp
            set_trace.cpp
            set_trace_buffered.cpp
            set_trace_sync.cpp
            store.cpp
            store_trace.cpp
            store_save_state.cpp
            streamer.cpp
            trace.cpp
            tracer.cpp
            tracer_buffered.cpp
            tracer_sync.cpp
            )

target_link_libraries(dm
                      protobuf
                      ${Snappy_LIBRARIES}
                      )
add_dependencies(dm
                 om_generated_headers
                 protobuf_generated_headers)


# GENERATE_EXPORT_HEADER(dm)
