<!-- Forward Shading Pipeline -->
<Pipeline name="FORWARD">
   <Setup>
      <RenderTarget id="SkyTemp" numColBufs="1" depthBuf="false" format="RGBA8" scale="0.125"/>
      <GlobalRenderTarget id="FogOfWarRT" />
   </Setup>
   <CommandQueue>
      <Stage id="Init">
         <SwitchTarget target="" />
         <ClearTarget colBuf0="true" depthBuf="true"/>
      </Stage>
      
      <Stage id="Sky">
         <DrawGeometry context="SKY" forceLodLevel="0"/>

         <SwitchTarget target="SkyTemp" />
         <DrawGeometry context="SKY" forceLodLevel="0"/>
      </Stage>

      <Stage id="Starfield">
         <SwitchTarget target="" />
         <DrawGeometry context="STARFIELD" forceLodLevel="0"/>
      </Stage>

      <Stage id="Depth">
         <DrawGeometry context="DEPTH" forceLodLevel="-2"/>
      </Stage>

      <Stage id="Light">
         <BindBuffer sampler="fowRT" sourceRT="FogOfWarRT" bufIndex="0" />
         <DoForwardLightLoop noShadows="false"/>
         <UnbindBuffers />
      </Stage>

      <Stage id="Fog">
         <BindBuffer sampler="skySampler" sourceRT="SkyTemp" bufIndex="0"/>
         <DrawGeometry context="FOG" noShadows="true" frustum_start="0.7"/>
         <UnbindBuffers />
      </Stage>

      <Stage id="Translucent">
         <DrawGeometry context="WATER_LOWQ" order="BACK_TO_FRONT" forceLodLevel="0"/>

         <DrawGeometry context="TRANSLUCENT_ON_TOP" order="BACK_TO_FRONT" forceLodLevel="0"/>
         <DrawGeometry context="TRANSLUCENT" order="BACK_TO_FRONT" forceLodLevel="0"/>
         <DrawGeometry context="BLUEPRINTS_DEPTH_PASS" forceLodLevel="0"/>
         <DrawGeometry context="BLUEPRINTS_COLOR_PASS" forceLodLevel="0"/>
         <DrawGeometry context="DEBUG_SHAPES" forceLodLevel="0"/>
      </Stage>

      <Stage id="Emissive">
         <DrawGeometry context="EMISSIVE" forceLodLevel="0"/>
      </Stage>

      <Stage id="Selected_Fast">
         <DrawSelected context="SELECTED_FAST" forceLodLevel="0"/>
      </Stage>

      <Stage id="Overlays">
			<DrawOverlays context="OVERLAY"/>
		</Stage>
	</CommandQueue>
</Pipeline>