<script type="text/x-handlebars" data-template-name="tasks">
<div id="tasks_manager" class="gui tasksManager">
   <div class="window">
      <div class="title">{{ view.title }} <div class="closeButton"></div></div>
      <div id="tabButtons">
         {{#each groups}}
            <img class="tabButton" {{bind-attr tab=this.key}} {{bind-attr title=this.displayName}} {{bind-attr src=this.tabButtonIcon}}/>
         {{/each}}
      </div>
      <div class="tabPages">
         {{#each groups}}
            <div class="tabPage" {{bind-attr id=this.key}}>
               {{view "App.StonehearthTasksGroupView" contextBinding="this"}}
            </div>
         {{/each}}
      </div>
   </div>

</div>
</script>

<script type="text/x-handlebars" data-template-name="taskGroup">
   <table class="list">
      <tbody>
         {{#each this.tasks}}
            <tr class="row" {{bind-attr id=this.__id}}>
               <td>
                  <div class="name">
                     <img class="banner button" {{bind-attr src=this.taskIcon}}/>
                     {{this.displayName}}
                  </div>
                  <div class="subtext">{{this.subtext}}</div>                    
                  <div class="toolbar">
                     {{#if this.source.stonehearth:stockpile }}
                        <a {{bind-attr id="removeStockpile"}} href="#" {{action removeStockpile this.source.__self target="view"}} class='uisounds'>
                           <button {{bind-attr class=":commandButton buttonEnabled" }}>
                              {{i18n stonehearth:remove_stockpile}}
                           </button>
                        </a>
                        <a href="#" {{action pauseStockpile this.source.stonehearth:stockpile.__self this.source.stonehearth:stockpile.active target="view"}} class='uisounds'>
                           <button>
                              {{#if this.source.stonehearth:stockpile.active }}
                                 {{i18n stonehearth:pause_stockpile}}
                              {{else}}
                                 {{i18n stonehearth:resume_stockpile}}
                              {{/if}}
                           </button>
                        </a>
                     {{/if}}
                  </div>
               </td>
               <td><span class="status">{{this.statusText}}</span></td>
            </tr>
         {{/each}}
      </tbody>
   </table>
</script>

