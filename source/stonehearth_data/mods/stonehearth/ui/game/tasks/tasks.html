<script type="text/x-handlebars" data-template-name="tasks">
<div id="tasks_manager" class="gui tasksManager">
   <div class="window">
      <div class="title">{{ view.title }} <div class="closeButton"></div></div>
      <div class="tasksContainer">
         <table class="list">
            <tbody>
            {{#each model.groupsArray}}
               {{partial 'taskGroup'}}
            {{/each}}
            </tbody>
         </table>
      </div>
   </div>

</div>
</script>

<script type="text/x-handlebars" data-template-name="_taskGroup">
   <tr class="header" {{bind-attr id=this.__id}}>
      <td>
         <div class="name">
            {{this.name}}
         </div>
      </td>
   </tr>
   {{#each this.tasksArray}}
      <tr class="row" {{bind-attr id=this.__id}}>
         <td>
            <div class="name">
               {{this.name}}
            </div>
            {{#if this.source }}
               <div class="toolbar">
                  {{#if this.source.stonehearth:stockpile }}
                     <a {{bind-attr id="removeStockpile"}} href="#" {{action removeStockpile this.source.__self target="view"}} class='uisounds'>
                        <button {{bind-attr class=":commandButton buttonEnabled" }}>
                           {{i18n stonehearth:remove_stockpile}}
                        </button>
                     </a>
                     <a {{bind-attr id=command.name}} href="#" {{action doCommand command target="view"}} class='uisounds'>
                        <button {{bind-attr class=":commandButton enabled:buttonEnabled:buttonDisabled" }}>                           
                           {{#if this.source.stonehearth:stockpile.active }}
                              {{i18n stonehearth:pause_stockpile}}
                           {{else}}
                              {{i18n stonehearth:resume_stockpile}}
                           {{/if}}
                        </button>
                     </a>
                  {{/if}}
               </div>
            {{/if}}
         </td>
      </tr>
   {{/each}}
</script>
