<script type="text/x-handlebars" data-template-name="buildingDesigner2">
   <div id="selectedBuildingWindow" class="window flat">
      <div class="title">
      {{#if building.unit_info.name}}
         {{ building.unit_info.name }}
      {{else}}         
         Building Designer
      {{/if}}
      </div>

      <div id="toolbar">
         <div hotkey="f" class="tabButton floorTool" tab="floorToolTab"><div class="label">{{i18n stonehearth:building_designer_floor_tool}}</div></div>
         <div hotkey="g" class="tabButton fillWallTool" tab="fillWallToolTab"><div class="label">{{i18n stonehearth:building_designer_fill_wall_tool}}</div></div>
         <div hotkey="r" class="tabButton roofTool" tab="roofToolTab"><div class="label">{{i18n stonehearth:building_designer_roof_tool}}</div></div>
         <div hotkey="n" class="tabButton doorTool" tab="doorToolTab"><div class="label">{{i18n stonehearth:building_designer_door_tool}}</div></div>
      </div>

      <div class="tabPage" id="floorToolTab" style="display: block">
         <h2>{{i18n stonehearth:building_designer_draw_floorplan}}</h2>
         {{i18n stonehearth:building_designer_draw_floorplan_help}}

         <h2>{{i18n stonehearth:building_designer_material}}</h2>
         <div class="brushPalette section">
            {{#each floorPatterns}}
               <!--<h2>{{category}}</h2>-->
               <div>
                  {{#each items}}
                     <a {{bind-attr name = "this.name"}}href="#" {{action selectFloorBrushTool this target="view"}} class="brushLink">
                        <img {{bind-attr src="this.portrait" title="this.name"}} />
                     </a>
                  {{/each}}
               </div>
               <div style="clear: both"></div>
            {{/each}}
            <h2>Tools</h2>
            <div>
               <a name="erase" href="#" {{action selectFloorEraserTool this target="view"}} class="brushLink">
                  <img src="floor_eraser.png" title="erase" />
               </a>
            </div>
         </div>
      </div>

      <div class="tabPage" id="fillWallToolTab">
         <h2>{{i18n stonehearth:building_designer_erect_walls}}</h2>
         {{i18n stonehearth:building_designer_erect_walls_help}}
         <h2>{{i18n stonehearth:building_designer_material}}</h2>
         <div class="brushPalette section">
            {{#each wallPatterns}}
               <!-- <h2>{{category}}</h2> -->
               <div>
                  {{#each items}}
                     <a {{bind-attr name = "this.name"}}href="#" {{action selectWallMaterial this target="view"}} class="brushLink">
                        <img {{bind-attr src="this.portrait" title="this.name"}} />
                     </a>
                  {{/each}}
               </div>
               <div style="clear: both"></div>
            {{/each}}
         </div>
      </div>

      <div class="tabPage" id="roofToolTab">
         <h2>{{i18n stonehearth:building_designer_raise_roof}}</h2>
         {{i18n stonehearth:building_designer_raise_roof_help}}
         <h2>{{i18n stonehearth:building_designer_material}}</h2>
         <div class="brushPalette section">
            {{#each roofPatterns}}
               <!-- <h2>{{category}}</h2> -->
               <div>
                  {{#each items}}
                     <a {{bind-attr name = "this.name"}}href="#" {{action selectRoofMaterial this target="view"}} class="brushLink">
                        <img {{bind-attr src="this.portrait" title="this.name"}} />
                     </a>
                  {{/each}}
               </div>
               <div style="clear: both"></div>
            {{/each}}
         </div>
      </div>

      <div class="tabPage" id="doorToolTab">
         <h2>{{i18n stonehearth:building_designer_doodads}}</h2>
         {{i18n stonehearth:building_designer_doodads_help}}
         <h2>{{i18n stonehearth:building_designer_material}}</h2>
         <div class="brushPalette doodadPalette section">
            {{#each doodads}}
               <h2>{{category}}</h2>
               <div>
                  {{#each items}}
                     <a {{bind-attr name = "this.name"}}href="#" {{action selectDoodadTool this target="view"}} class="brushLink">
                        <img class="small noBorder" {{bind-attr src="this.portrait" title="this.name"}} />
                     </a>
                  {{/each}}
               </div>
               <div style="clear: both"></div>
            {{/each}}
         </div>
      </div>

      <button class="warn" id="removeBuilding">{{i18n stonehearth:remove}}</button>

      <button {{bind-attr class=building.active:pause:start}} id="startBuilding">
         {{#if building.active }}
            Pause Building
         {{else}}
            Start Building
         {{/if}}
      </button>

   </div>
</script>
