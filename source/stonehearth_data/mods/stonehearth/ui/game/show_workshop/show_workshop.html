<script type="text/x-handlebars" data-template-name="stonehearthCrafter">
   <div id="craftWindow" {{bind-attr class=skinClass}}>

      <div id="shingle">
         <a id="closeButton" {{action hide target="view"}}></a>
         <div id="title">{{data.unit_info.name}}</div>
         <div id="subtitle">
            {{i18n stonehearth:show_workshop_description}}
            {{data.stonehearth:workshop.crafter.unit_info.name}}
         </div>
      </div>

      {{#if data.stonehearth:workshop.order_list.orders}}
         <a {{action togglePause target="view"}} >
            <div id="statusSign" {{bind-attr class=data.workshopIsPaused:closed:open}}>
               <div id="message">
                  {{#if data.workshopIsPaused}}
                     {{i18n stonehearth:workshop_closed}}
                  {{else}}
                     {{i18n stonehearth:workshop_open}}
                  {{/if}}
               </div>
            </div>
         </a>
      {{/if}}

      <div id="craftingWindow">
         <div id="recipeList">
            {{partial 'recipeList'}}
         </div>

         <div id="details">
            {{partial 'details'}}
         </div>

         {{partial 'orderOptions'}}
         {{partial 'orderList'}}
      </div>
   </div>

</script>

<!--Template for the accordion-->
<script type="text/x-handlebars" data-template-name="_recipeList">
   <div id="searchBox">
      <input id="searchInput" placeholder="Type to search"/>
   </div>
   <div id="recipeItems">
      {{#each view.formatted_recipes}}
         <div class='category'>
            <h3>{{category}}</h3>
            <div>
               {{#each recipes}}
                  <div {{bind-attr title=this.recipe_name unlock_level=this.level_requirement}} {{action select this target="view"}} class="item uisounds">
                     <img {{bind-attr src="this.portrait"}} />
                  </div>
               {{/each}}
            </div>
            <div style="clear: both"></div>
         </div>
      {{/each}}
   </div>
</script>

<!--Template for the details window-->
<script type="text/x-handlebars" data-template-name="details">
   <div>
      <center>
         <h1 id="title">{{view.currentRecipe.recipe_name}}</h1>
      </center>

      <div id='portraitContainer'>
         <img id="portrait">
      </div>

      <div id="description">
         <div id="ingredients">
            <h2>{{i18n stonehearth:craft_ingredients}}</h2>
            {{#each view.currentRecipe.ingredients}}
               <div class="ingredient">
                  <img {{bind-attr src=icon title=name}} />
                  <div class="count">{{count}}</div>
               </div>
            {{/each}}
         </div>

         <br><br>
         <div id="usefulText"></div>
         <div id="flavorText"></div>
      </div>
      <div id="unlock_description">
         <h2>{{i18n stonehearth:unlock_text}}</h2> 
         {{#each view.currentRecipe.requirement.prerequisites}}
            <div class="requirementBlock">
               <img {{bind-attr src="this.portrait"}}/> <br />
               <h2>{{made}} / {{required}}</h2>
            </div>
         {{/each}}
      </div>
   </div>
</script>

<!--Template for the options and craft button-->
<script type="text/x-handlebars" data-template-name="_orderOptions">
   <div id="orderOptions">
      <div id="craftOrderOption" class="orderOptionControls">
      <input type="radio" name="conditionGroup" value="make" class="craftRadioButton" id="make" checked>
      <label for="make" style='width:auto;' clicksound="sounds:ui:carpenter_menu:add_remove">{{i18n stonehearth:craft_number_left}}</label>
      <span>
         <div class="dec numericButton uisounds">-</div>
         <input type="number" name="quantityToMake" id="makeNumSelector" value="1" min="1" max="99" class="craftNumericSelect numericInput">
         <div class="inc numericButton uisounds">+</div>
      </span>
      <label class="rightText" for="make" style='width:auto;'>{{i18n stonehearth:craft_number_right}}</label>
      </div>

      {{#if data.stonehearth:workshop.crafter.stonehearth:crafter.should_maintain}}
      <div id="maintainOrderOption" class="orderOptionControls">
      <input type="radio" name="conditionGroup" value="maintain" class="craftRadioButton" id="maintain">
      <label for="maintain" style='width:auto' clicksound="sounds:ui:carpenter_menu:add_remove">{{i18n stonehearth:craft_up_to_left}}</label>
      <span>
         <div class="dec numericButton uisounds">-</div>
         <input id="maintainNumSelector" type="number" name="quantityToMaintain" value="1" min="1" max="99" class="craftNumericSelect numericInput">
         <div class="inc numericButton uisounds">+</div>
      </span>
      <label class="rightText" for="maintain" style='width:auto'>{{i18n stonehearth:craft_up_to_right}}</label>
      </div>
      {{else}}
      <label id="maintainDisabledId">{{i18n stonehearth:maintain_option_disabled}}</label>
      {{/if}}

      <a id="craftButton" href='#' {{action craft target=view}}>
         <div id="craftButtonLabel">Craft!</div>
      </a>
   </div>
   <div id="orderOptionsLocked"></div>
</script>

<!--Template for everything regarding the order list-->
<script type="text/x-handlebars" data-template-name="_orderList">
   <div id="orderList">

      <div id="orders">
      {{#each data.stonehearth:workshop.order_list.orders}}
         {{#if is_crafting}}
            <div class="orderListItem inProgressOrder" {{bind-attr data-orderId = "id"}}>
               <label class="craftingLabel">{{../../craftingStatus}}</label>
         {{else}}
            <div class="orderListItem normalOrder" {{bind-attr data-orderId = "id"}}>
               <label class="craftingLabel invisible">{{../../craftingStatus}}</label>
         {{/if}}
            <a href="#" {{action select recipe remaining condition.at_least target="view"}}>
               <img {{bind-attr src = "portrait"}} {{bind-attr title = "recipe.recipe_name"}}>
            </a>
            {{#if condition.amount }}
               <label class="amountLabel">{{condition.remaining}}</label>
            {{/if}}
            {{#if condition.at_least }}
               <label class="amountLabel"> = {{condition.at_least}}</label>
            {{/if}}
               <label class="deleteLabel">{{i18n stonehearth:workshop_remove_confirm}}</label>
            </div>
      {{/each}}
      </div>

      <a id="orderListUpBtn" {{action scrollOrderListUp target="view"}} class='uisounds'><img /></a>
      <a id="orderListDownBtn" {{action scrollOrderListDown target="view"}} class='uisounds'><img /></a>

      <div id="orderListControls">
         <a id="garbageButton" href="#"></a>
         <ul id="garbageList" class="droptrue"></ul>
      </div>

   </div>
</script>

