<script type="text/x-handlebars" data-template-name="stonehearthCrafter">
   <div class="overlay"></div>

   <div id="craftingUI">

      <div id="craftingShingle" class="controlFont;">
         <a class="closeButton" {{action "hide" target="view"}}></a>
         <img class="classMarker" {{bindAttr src = "unit_info.icon"}}>
         <div id="shingleText">
            <h1>{{unit_info.name}}</h1>
            <small>TODO: insert crafter name here</small>
         </div>
         <div id="pausedLabel">
            <a id="pauseLink" {{action togglePause target="view"}}
               {{bindAttr data-original-title = "pauseLinkTooltip"}}>
               {{i18n stonehearth_crafter:paused}}
            </a>
         </div>
      </div>

      <div id="craftingWindow">
         <div id="recipeList">
            {{partial 'recipeList'}}
         </div>

         <div id="details">
            {{render 'details' current}}
         </div>

         <div id="order">
            {{partial 'orderOptions'}}
         </div>

         {{partial 'orderList'}}
      </div>
   </div>

</script>

<!--Template for the accordion-->
<script type="text/x-handlebars" data-template-name="_recipeList">
   <div id="searchBox">
      <a id="searchButton" {{action findAndSelectRecipe target="view"}}></a>
      <input id="searchInput" placeholder="Type to search"/>
   </div>
   <div id="recipeAccordion">
      {{#each stonehearth_crafter:workshop.crafter.stonehearth_crafter:crafter.craftable_recipes}}
         <h3>{{category}}</h3>
         <div>
            {{#each recipes}}
               <a href="#" {{action select this target="view"}} class="recipeLink">{{this.recipe_name}}</a>
               <br>
            {{/each}}
         </div>
      {{/each}}
   </div>
</script>

<!--Template for the details window-->
<script type="text/x-handlebars" data-template-name="details">
   <div>
      <div id="title">
         <h1>{{model.recipe_name}}</h1>
      </div>
      <img id="portrait">
      <div id="description">
         <center>
            <div id="ingredients">
               <img src="/stonehearth_crafter/html/images/scroll_socket_left_bookend.png">
               {{#each model.ingredients}}
                  <div class="ingredientSocket">
                     <img {{bindAttr src="socket_background"}}>
                     <span class="count">{{count}}</span>
                  </div>
               {{/each}}
               <img src="/stonehearth_crafter/html/images/scroll_socket_right_bookend.png">
            </div>
         </center>

         <div id="attributes">
            <div id="usefulText"></div>
            <div id="flavorText"></div>
         </div>
      </div>
   </div>
</script>

<!--Template for the options and craft button-->
<script type="text/x-handlebars" data-template-name="_orderOptions">
   <div id="orderOptions">
      <div id="craftOrderOption" class="orderOptionControls" {{bindAttr data-original-title = "craftRadioTooltip"}}>
      <input type="radio" name="conditionGroup" value="make" class="craftRadioButton" id="make" checked>
      <label for="make" style='width:auto;'>{{i18n stonehearth_crafter:craft_number_left}}</label>
      <span>
         <div class="dec numericButton">-</div>
         <input type="number" name="quantityToMake" id="makeNumSelector" value="1" min="1" max="99" class="craftNumericSelect">
         <div class="inc numericButton">+</div>
      </span>
      <label class="rightText" for="make" style='width:auto;'>{{i18n stonehearth_crafter:craft_number_right}}</label>
      </div>

      <div id="maintainOrderOption" class="orderOptionControls"
       {{bindAttr data-original-title = "maintainRadioTooltip"}}>
      <input type="radio" name="conditionGroup" value="mantain" class="craftRadioButton" id="maintain">
      <label for="maintain" style='width:auto'>{{i18n stonehearth_crafter:craft_up_to_left}}</label>
      <span>
         <div class="dec numericButton">-</div>
         <input id="mantainNumSelector" type="number" name="quantityToMantain" value="1" min="1" max="99" class="craftNumericSelect">
         <div class="inc numericButton">+</div>
      </span>
      <label class="rightText" for="maintain" style='width:auto'>{{i18n stonehearth_crafter:craft_up_to_right}}</label>
      </div>

      <button class='btn' {{action "craft" target="view"}}
       id="craftButton" {{bindAttr data-original-title = "craftButtonTooltip"}}>
         <img src="/stonehearth_crafter/html/images/anvil.png">
      </button>
   </div>
</script>

<!--Template for everything regarding the order list-->
<script type="text/x-handlebars" data-template-name="_orderList">
   <div id="orderList">

      <div id="orders">
      {{#each stonehearth_crafter:workshop.order_list}}
         {{#if status.is_crafting}}
            <div class="orderListItem inProgressOrder" {{bindAttr data-orderId = "id"}}>
               <label class="craftingLabel">{{../../craftingStatus}}</label>
         {{else}}
            <div class="orderListItem normalOrder" {{bindAttr data-orderId = "id"}}>
               <label class="craftingLabel invisible">{{../../craftingStatus}}</label>
         {{/if}}
            <a href="#" {{action select recipe remaining condition.inventory_below target="view"}}><img {{bindAttr src = "portrait"}} {{bindAttr title = "recipe.recipe_name"}}></a>
            {{#if condition.amount}}
               <label class="amountLabel">{{remaining}}</label>
            {{else}}
               <label class="amountLabel"> = {{condition.inventory_below}}</label>
            {{/if}}
               <label class="deleteLabel">{{i18n stonehearth_crafter:remove_confirm}}</label>
         </div>
      {{/each}}
      </div>

      <a id="orderListUpBtn" {{action scrollOrderListUp target="view"}}><img src="/stonehearth_crafter/html/images/queue_up_arrow.png"></a>
      <a id="orderListDownBtn" {{action scrollOrderListDown target="view"}} ><img src="/stonehearth_crafter/html/images/queue_down_arrow.png"></a>

      <div id="orderListControls">
         <a id="pauseButton" href="#" {{action togglePause target="view"}}></a>
         <a id="garbageButton" href="#" {{bindAttr data-original-title = "garbageButtonTooltip"}}></a>
         <ul id="garbageList" class="droptrue"></ul>
      </div>

   </div>
</script>

